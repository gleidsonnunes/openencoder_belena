(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["jobs"],{"1be4":function(t,e,s){var n=s("d066");t.exports=n("document","documentElement")},"37e8":function(t,e,s){var n=s("83ab"),a=s("9bf2"),o=s("825a"),i=s("df75");t.exports=n?Object.defineProperties:function(t,e){o(t);var s,n=i(e),r=n.length,c=0;while(r>c)a.f(t,s=n[c++],e[s]);return t}},"44d2":function(t,e,s){var n=s("b622"),a=s("7c73"),o=s("9112"),i=n("unscopables"),r=Array.prototype;void 0==r[i]&&o(r,i,a(null)),t.exports=function(t){r[i][t]=!0}},"7c73":function(t,e,s){var n=s("825a"),a=s("37e8"),o=s("7839"),i=s("d012"),r=s("1be4"),c=s("cc12"),l=s("f772"),u=l("IE_PROTO"),d="prototype",b=function(){},m=function(){var t,e=c("iframe"),s=o.length,n="<",a="script",i=">",l="java"+a+":";e.style.display="none",r.appendChild(e),e.src=String(l),t=e.contentWindow.document,t.open(),t.write(n+a+i+"document.F=Object"+n+"/"+a+i),t.close(),m=t.F;while(s--)delete m[d][o[s]];return m()};t.exports=Object.create||function(t,e){var s;return null!==t?(b[d]=n(t),s=new b,b[d]=null,s[u]=t):s=m(),void 0===e?s:a(s,e)},i[u]=!0},b794:function(t,e,s){},caad6:function(t,e,s){"use strict";var n=s("23e7"),a=s("4d64").includes,o=s("44d2");n({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},df75:function(t,e,s){var n=s("ca84"),a=s("7839");t.exports=Object.keys||function(t){return n(t,a)}},ea19:function(t,e,s){"use strict";var n=s("b794"),a=s.n(n);a.a},ee68:function(t,e,s){"use strict";s.r(e);var n,a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"jobs"}},[s("JobsTable")],1)},o=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"jobs-table"}},[s("div",{staticClass:"text-right mb-2"},[s("b-button",{on:{click:t.toggleAutoUpdate}},[t._v(t._s(t.autoUpdate?"⟳ Auto Update":"❚❚ Paused"))])],1),s("b-table",{attrs:{striped:"",hover:"",dark:"",fields:t.fields,busy:!t.items,items:t.items},scopedSlots:t._u([{key:"cell(created_date)",fn:function(e){return[s("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:e.item.created_date,expression:"data.item.created_date"}]},[t._v(" "+t._s(t._f("moment")(e.item.created_date,"from","now"))+" ")])]}},{key:"cell(status)",fn:function(e){return[s("b-badge",{attrs:{variant:["error","cancelled"].includes(e.item.status)?"danger":"primary"}},[t._v(t._s(e.item.status))])]}},{key:"cell(progress)",fn:function(e){return[["error","cancelled"].includes(e.item.status)?t._e():s("b-progress",{attrs:{value:e.item.progress,animated:100!==e.value,variant:100===e.value?"success":"primary","show-progress":""}}),e.item.speed&&e.item.fps&&"encoding"===e.item.status?s("p",{staticClass:"text-monospace text-center",staticStyle:{"font-size":"0.7em",margin:"0"}},[t._v(t._s(e.item.speed)+" @ "+t._s(e.item.fps)+" FPS")]):t._e()]}},{key:"cell(details)",fn:function(e){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" ")])]}},t.isOperatorAdmin?{key:"cell(action)",fn:function(e){return[s("b-button-group",{attrs:{size:"sm"}},[["error","cancelled","completed"].includes(e.item.status)?t._e():s("b-button",{attrs:{variant:"light"},on:{click:function(s){return t.onClickCancel(e.item.id)}}},[t._v("❌")]),["error","cancelled"].includes(e.item.status)?s("b-button",{attrs:{variant:"light"},on:{click:function(s){return t.onClickRestart(e.item.id)}}},[t._v("⟳")]):t._e()],1)]}}:null,{key:"row-details",fn:function(e){return[s("b-row",{staticClass:"mb-2"},[s("b-col",{staticClass:"text-sm-right",attrs:{sm:"2"}},[s("b",[t._v("Guid:")])]),s("b-col",[t._v(t._s(e.item.guid))])],1),s("b-row",{staticClass:"mb-2"},[s("b-col",{staticClass:"text-sm-right",attrs:{sm:"2"}},[s("b",[t._v("Source:")])]),s("b-col",[t._v(t._s(e.item.source))])],1),s("b-row",{staticClass:"mb-2"},[s("b-col",{staticClass:"text-sm-right",attrs:{sm:"2"}},[s("b",[t._v("Destination:")])]),s("b-col",[t._v(t._s(e.item.destination))])],1),s("b-row",{staticClass:"mb-2"},[s("b-col",{staticClass:"text-sm-right",attrs:{sm:"2"}},[s("b",[t._v("Probe Data:")])]),s("b-col",[s("div",{staticClass:"code"},[s("b-form-textarea",{attrs:{rows:"3","max-rows":"6",value:e.item.probe}})],1)])],1),s("b-row",{staticClass:"mb-2"},[s("b-col",{staticClass:"text-sm-right",attrs:{sm:"2"}},[s("b",[t._v("Encode Options:")])]),s("b-col",[s("div",{staticClass:"code"},[s("b-form-textarea",{attrs:{rows:"3","max-rows":"6",value:e.item.options}})],1)])],1)]}},{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-danger my-2"},[s("b-spinner",{staticClass:"align-middle"}),s("strong",[t._v("Loading...")])],1)]},proxy:!0}],null,!0)}),0===t.items.length?s("h2",{staticClass:"text-center"},[t._v("No Jobs Found")]):t._e(),s("b-pagination-nav",{attrs:{"link-gen":t.linkGen,"number-of-pages":t.pages,"use-router":""},on:{change:t.onChangePage}})],1)},r=[],c=(s("caad6"),s("1ab6")),l=s("d722"),u=5e3,d={data:function(){return{fields:["id","source","preset","created_date","status","progress","details","action"],items:[],count:0,autoUpdate:!0,user:c["a"].user,role:c["a"].role}},computed:{pages:function(){return 0===this.count?1:Math.ceil(this.count/10)},isOperatorAdmin:function(){return["operator","admin"].includes(this.user.role)}},mounted:function(){var t=this,e=this.$route.query.page||0;this.getJobs(e),n=setInterval((function(){t.autoUpdate&&(e=t.$route.query.page||0,t.getJobs(e))}),u)},destroyed:function(){clearInterval(n)},methods:{linkGen:function(t){return 1===t?"?":"?page=".concat(t)},toggleAutoUpdate:function(){this.autoUpdate=!this.autoUpdate},onChangePage:function(t){this.getJobs(t)},onClickCancel:function(t){var e=t;this.cancelJob(e)},onClickRestart:function(t){var e=t;this.restartJob(e)},cancelJob:function(t){l["a"].cancelJob(this,t,(function(t,e){console.log("Cancel job: ",e)}))},restartJob:function(t){l["a"].restartJob(this,t,(function(t,e){console.log("Restart job: ",e)}))},getJobs:function(t){var e=this;l["a"].getJobs(this,t,(function(t,s){e.items=s&&s.items,e.count=s&&s.count}))}}},b=d,m=(s("ea19"),s("2877")),f=Object(m["a"])(b,i,r,!1,null,null,null),p=f.exports,v={name:"Jobs",components:{JobsTable:p}},g=v,h=Object(m["a"])(g,a,o,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=jobs.c8ae645b.js.map